trigger:
  branches:
    include:
    - '*'
    exclude:
    - stable
  paths:
    exclude:
    - po/xournalpp.pot
    - po/*.po
  

stages:
- stage: 'Build_Test_Stage'
  jobs:
  - job: 'Linux'
    pool:
      vmImage: 'ubuntu-16.04'
    displayName: 'Test Xournal++ on Linux'
    steps:
    - template: steps/build_linux.yml
      parameters:
        cmake_flags: '-DCMAKE_DEBUG_INCLUDES_LDFLAGS=ON -DENABLE_CPPUNIT=ON -DDEBUG_COMPILE=ON'
        run_tests: true
  - job: Windows
    pool:
      vmImage: 'vs2017-win2016'
    displayName: 'Build for Windows'
    steps:
    - template: steps/build_windows.yml
